# azure-pipelines.yml

trigger:
  branches:
    include:
      - main   # ya jise branch aap use karte ho

pool:
  vmImage: 'ubuntu-latest'

steps:
# 1️⃣ Checkout code from GitHub
- checkout: self
  clean: true
  fetchDepth: 0   # fetch full repo

# 2️⃣ Debug (optional, confirm files)
- script: ls -la
  displayName: 'List root folder'

# 3️⃣ Install Node.js
- task: NodeTool@0
  inputs:
    versionSpec: '20.x'   # Node version
  displayName: 'Install Node.js'

# 4️⃣ Install dependencies
- script: |
    npm install
  workingDirectory: .
  displayName: 'Install npm dependencies'

# 5️⃣ Build React app
- script: |
    npm run build
  workingDirectory: .
  displayName: 'Build React App'

# 6️⃣ Optional: Publish build artifact
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'build'
    ArtifactName: 'ReactAppBuild'
    publishLocation: 'Container'